 <!DOCTYPE html>
 <html xmlns="http://www.w3.org/1999/xhtml"
 	xmlns:th="http://www.thymleaf.org">
 <head>
 
     <meta charset="utf-8"/>
     <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
     <meta name="viewport" content="width=device-width, initial-scale=1"/>
     <meta name="description" content=""/>
     <meta name="author" content=""/>
 
     <title>FindService - Encontre o que você procura</title>
     
     <!-- Adicionando JQuery -->
     <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
 
     <!-- Adicionando Javascript -->
     <script src="js/cepempresa.js"></script>
     <script src="js/cepusuario.js"></script>
     <script src="js/pesquisa.js"></script>
     <script src="js/validator.min.js"></script>
     <script src="js/jquery.js"></script>
     <script src="js/jquery.dataTables.min.js"></script>
     <script src="js/dataTables.bootstrap.min.js"></script>
    
 	<!-- Bootstrap Core CSS -->
     <link href="css/bootstrap.min.css" rel="stylesheet">
     <link href="css/dataTables.bootstrap.min.css" rel="stylesheet">
 	
     <!-- Custom CSS -->
      <link href="css/stylish-portfolio.css" rel="stylesheet"/>
     <link rel="stylesheet" href="css/pesquisa.css">
     
 	<!-- Custom Fonts -->
     <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
     <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css"/>
     
 
     <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
     <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
     <!--[if lt IE 9]>
         <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
         <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
     <![endif]-->
 </head>
 <!--EmpRegisterModal-->
 <body>
 <div class="modal fade" id="FormRegistroEmpModal"  tabindex="-1"
  role="dialog" aria-labelledby="FormRegistroEmpModalLabel">
     <div class="modal-dialog" role="document">
         <div class="modal-content">
             <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal">x</button>
                 <h4 class="modal-title" id="FormRegistroEmpModalLabel">
                     Cadastro de Empresa ou Prestador de Serviço
                 </h4>
             </div>
             <div class ="modal-body">
                 <form data-toggle="validator"th:object="${usuario}" th:action="@{/save}" method="post">
                     <div class="row">
                         <div class="form-group col-md-6">
                             <label for="EmpInputNomeEmp">
                                 Nome:
                             </label>
                             <input class="form-control" th:field="${usuario.nome}" id="EmpInputNome" type="text" placeholder="Nome da Empresa ou Prestador" required>
                             <div class="help-block with-errors"></div>
                         </div>
                         <div class="form-group col-md-6">
                             <label for="EmpInputEmail">
                                 Email:
                             </label>
                             <input class="form-control" th:field="${usuario.email}" id="EmpInputEmail" type="email" placeholder="Digite o email" required
                             data-error="Email inválido! Exemplo: email@email.com">
                             <div class="help-block with-errors"></div>
                         </div>
                     </div>
                     <div class ="row">
                     	<div class="form-group col-md-6">
                             <label for="EmpCep">
                             Cep:
                             </label>
 							<input class="form-control" th:field="${usuario.cep}" type="text" id="EmpCep" value="" maxlength="9" placeholder="Digite o seu cep" required>
 							<a href="http://www.buscacep.correios.com.br/sistemas/buscacep/" target="_blank">Não sei meu cep.</a>
 							<div class="help-block with-errors"></div>
                         </div>
                          <div class="form-group col-md-6">
                             <label for="EmpInputEndereco">
                                  Endereço:
                              </label>
                              <input class="form-control" th:field="${usuario.endereco}" id="EmpInputEndereco" type="text" placeholder="Endereço" >
                              <div class="help-block with-errors"></div>
                          </div>
                      </div>
                     <div class="row">
                     
                      <div class="form-group col-md-6">
                             <label for="EmpInputCidade">
                                  Cidade:
                              </label>
                              <input class="form-control" th:field="${usuario.cidade}" id="EmpInputCidade" type="text" placeholder="Cidade">
                              <div class="help-block with-errors"></div>
                          </div>
                      <div class="form-group col-md-3">
                              <label for="EmpInputUf">
                                  UF:
                              </label>
                            <input class="form-control" th:field="${usuario.uf}" id="EmpInputUf" type="text" placeholder="UF" >
                              <div class="help-block with-errors"></div>
                          </div>
                          <div class="form-group col-md-3">
                             <label for="EmpInputNumero">
                                 Numero:
                             </label>
                             <input class="form-control" name="numero"  id="EmpInputNumero" type="text" placeholder="Número da Casa" 
                             required data-error="Preencha o Campo">
                             <div class="help-block with-errors"></div>
                         </div>
                     </div>
                     <div class="row">
                      <div class="form-group col-md-6">
                             <label for="EmpInputTelefone">
                                 Telefone:
                             </label>
                             <input class="form-control" th:field="${usuario.telefone}" id="EmpInputTelefone" type="text" placeholder="Digite o Telefone" required>
                             <div class="help-block with-errors"></div>
                         </div>
                         
                         <div class="form-group col-md-6">
                         <label for="EmpInputCategoria">
                                 Categoria:
                             </label>
                         <select class="form-control" th:field="${usuario.categoria}" id="EmpInputCategoria" required> 
                           <option value ="">Selecione a categoria</option>
                           <option value ="1">Advocacia</option>
                           <option value ="2">Alimentação</option>
                           <option value ="3">Automotiva</option>
                           <option value ="4">Banco</option>
                           <option value ="5">Bebida</option>
                           <option value ="6">Bombeiro</option>
                           <option value ="7">Comércio</option>
                           <option value ="8">Distribuidora</option>
                           <option value ="9">Educação</option>
                           <option value ="10">Eletricidade</option>
                           <option value ="11">Eletrodomésticos</option>
                           <option value ="12">Gráfica</option>
                           <option value ="13">Imobiliária</option>
                           <option value ="14">Informática</option>
                           <option value ="15">Moda</option>
                           <option value ="16">Música</option>
                           <option value ="17">Policia</option>
                           <option value ="18">Promotoria</option>
                           <option value ="19">Publicidade</option>
                           <option value ="20">Seguradora</option>
                           <option value ="21">Segurança</option>
                           <option value ="22">Telecomunicações</option>
                           <option value ="23">Turismo</option>
                         </select>
                         <div class="help-block with-errors"></div>
 
                         </div>
                     </div>
                     <div class="row">
                     <div class="form-group col-md-6">
                             <label for="EmpInputSenha">
                                 Senha:
                             </label>
                             <input class="form-control" th:field="${usuario.senha}" id="EmpInputSenha" type="password" placeholder="Digite a Senha">
                             <div class="help-block with-errors"></div>
                         </div>
                     <div class="form-group col-md-6">
                             <label for="EmpInputConfirmar">
                                 Confirmar Senha:
                             </label>
                             <input class="form-control" id="EmpInputConfirmar" type="password" placeholder="Digite a senha" 
                             data-match="#EmpInputSenha" data-match-error="Atenção! As senhas não estão iguais.">
                             <div class="help-block with-errors"></div>
                     </div>
                     </div>
                     <hr/>
                     <div class="row">
                       <div class="col-md-12">
                         <button class="btn btn-primary" type="submit">Salvar</button>
                         <button class="btn btn-default" type="button" data-dismiss="modal">Cancelar</button>
                       </div>
                     </div>
                 </form>
             </div>
         </div>
     </div>
 </div>
 
 <!--UsuarioRegisterForm-->
 <div class="modal fade" id="FormRegistroModal" tabindex="-1" role="dialog"
  aria-labelledby="FormRegistroModalLabel">
     <div class="modal-dialog" role="document">
         <div class="modal-content">
             <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal">
                     x
                 </button>
                 <h4 class="modal-title" id="FormRegistroModalLabel">
                     Cadastro de Usuário
                 </h4>
             </div>
             <div class="modal-body">
                 <form id="UsuarioForm" data-toggle="validator" th:object="${usuario}" th:action="@{/save}" method="post">
                     <div class="row">
                         <div class="form-group col-md-6">
                             <label for="InputUsuarioNome">
                                 Nome:
                             </label>
                             <input class="form-control" th:field="${usuario.nome}" id="InputUsuarioNome" type="text" placeholder="Digite o Nome" required>
                             <div class="help-block with-errors"></div>
                         </div>
                         <div class="form-group col-md-6">
                             <label for="InputUsuarioEmail">
                                 Email:
                             </label>
                             <input class="form-control" th:field="${usuario.email}" id="InputUsuarioEmail" type="email" placeholder="Digite o email" required
                             data-error="Email inválido! Exemplo: email@email.com">                        	
                         	<div class="help-block with-errors"></div>
                         </div>
                     </div>
                     <div class="row">
                     	<div class="form-group col-md-6">
                             <label for="UsuarioCep">
                             Cep:
                             </label>
 							<input class="form-control" th:field="${usuario.cep}" type="text" id="UsuarioCep" value="" maxlength="9" placeholder="Digite o seu cep" required>
                         	<a href="http://www.buscacep.correios.com.br/sistemas/buscacep/" target="_blank" >Não sei meu cep.</a>
                         	<div class="help-block with-errors"></div>
                         </div>
                         <div class="form-group col-md-6">
                              <label for="InputUsuarioEndereco">
                                  Endereço:
                              </label>
                             <input class="form-control" th:field="${usuario.endereco}" id="InputUsuarioEndereco" type="text" placeholder="Endereço" >
                          </div>
                      </div>
                      <div class="row">
                          <div class="form-group col-md-6">
                              <label for="InputUsuarioCidade">
                                  Cidade:
                              </label>
                             <input class="form-control" th:field="${usuario.cidade}" id="InputUsuarioCidade" type="text" placeholder="Cidade" >
                          </div>
                          <div class="form-group col-md-3">
                              <label for="InputUsuarioUf">
                                  UF:
                              </label>
                             <input class="form-control" th:field="${usuario.uf}" id="InputUsuarioUf" type="text" placeholder="UF" >
                          </div>
  						<div class="form-group col-md-3">
                              <label for="InputUsuarioNumero">
                                 Numero:
                             </label>
                             <input class="form-control"  name="numero" id="InputUsuarioNumero" type="text" placeholder="Número da Casa" required
                              data-error="Preencha o Campo">
                             <div class="help-block with-errors"></div>
                         </div>
                     </div>
                     <div class="row">
                         <div class="form-group col-md-6">
                             <label for="InputUsuarioSenha">
                                 Senha:
                             </label>
                             <input class="form-control" th:field="${usuario.senha}" id="InputUsuarioSenha" type="password" placeholder="Digite a Senha" required>
                             <div class="help-block with-errors"></div>
                         </div>
                         <div class="form-group col-md-6">
                             <label for="InputUsuarioTelefone">
                                 Telefone:
                             </label>
                             <input class="form-control" th:field="${usuario.telefone}" id="InputUsuarioTelefone" type="text" placeholder="Digite o Telefone" required>
                             <div class="help-block with-errors"></div>
                         </div>
 
                     </div>
                     <div class="row">
                        <div class="form-group col-md-6">
                             <label for="InputUsuarioConfirmar">
                                 Confirmar Senha:
                             </label>
                             <input class="form-control" id="InputUsuarioConfirmar" type="password" placeholder="Digite a senha" required
                             data-match="#InputUsuarioSenha" data-match-error="Atenção! As senhas não estão iguais.">
                             <div class="help-block with-errors"></div>
                         </div>
                     </div>
                     <hr/>
                     <div class="row">
                       <div class="col-md-12">
                         <button id="btn-salvar-usuario" class="btn btn-primary" type="submit">Salvar</button>
                         <button class="btn btn-default" type="button" data-dismiss="modal">Cancelar</button>
                       </div>
                     </div>
                 </form>
             </div>
         </div>
     </div>
 </div>
              
 <!--LoginForm-->
 <div class="modal fade" id="LoginFormModal"  tabindex="-1"
  role="dialog" aria-labelledby="LoginFormModalLabel">
  
     <div class="modal-dialog" role="document">
         <div class="modal-content">
             <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal">x</button>
                 <h4 class="modal-title" id="LoginFormModalLabel">
                     Login
                  </h4>
             </div>
             <div class ="modal-body">
                 <form th:action="@{/login
                 }" method="post" class="form-horizontal">
                 <input type="hidden" th:name="${_csrf.parameterName}"
 						th:value="${_csrf.token}" />
                     <div class="form-group">
                         <label for="LoginInputEmail" class="col-sm-2 control-label">
                             Email:
                         </label>
                         <div class="col-sm-10">
                             <input type="email" class="form-control" id="LoginInputEmail" placeholder="Email" name="email">
                         </div>
                     </div>
                     <div class="form-group">
                         <label for="LoginInputSenha" class="col-sm-2 control-label">
                             Senha:
                         </label>
                         <div class="col-sm-10">
                             <input type="password" class="form-control" id="LoginInputSenha" placeholder="Senha" name="senha">
                         </div>
                     </div>
                     <div class="form-group">
                         <div class="col-sm-offset-2 col-sm-10">
                             <div class="checkbox">
                                 <label>
                                     <input type="checkbox">
                                     Lembrar-me
                                 </label>
                             </div>
                         </div>
                     </div>
 
                     <div class="form-group">
                         <div class="col-sm-offset-2 col-sm-10">
                            <button class="btn btn-primary" type="submit">Entrar</button>
                         <button class="btn btn-default" type="button" data-dismiss="modal">Cancelar</button>
                         </div>
                     </div>
                 </form>
             </div>
         </div>
     </div>
 </div>
 
 <!--Menu-->
 <nav class="navbar navbar-inverse navbar-fixed-top">
     <div class="container-fluid">
         <div class="navbar-header">
             <a class="navbar-brand" href="#">FindService</a>
         </div>
         <!--DropdownCadastro e Pesquisa-->
          <ul class="nav navbar-nav navbar-right" >
          <li class="dropdown">
                 <a class="dropdown-toggle" data-toggle="dropdown" href="#"><span class="glyphicon glyphicon-search"></span> Pesquisar
                  <span class="caret" ></span></a>
                <ul class="dropdown-menu" >
                     <li>
 						<a href="#search">Pesquisar por Nome</a>
 						<a href="#">Pesquisar Por categoria</a>
 					</li>
 				</ul>
 			</li>
                 <li class="dropdown">
                 <a class="dropdown-toggle" data-toggle="dropdown" href="#" th:if="${usuarioLogado} == null"><span class="glyphicon glyphicon-user"></span> Cadastrar
                 <span class="caret" ></span></a>
                 <ul class="dropdown-menu" >
                     <li>
                         <a href="#" data-toggle="modal" data-target="#FormRegistroModal">Cadastrar Usuário</a>
                     </li>
                     <li>
                         <a href="#" data-toggle="modal" data-target="#FormRegistroEmpModal">Cadastrar Empresa/Prestador</a>
                     </li>
                 </ul>
            </li>
            <!--DropdownLogin-->
            <li th:if="${usuarioLogado} == null"><a href="#" data-toggle="modal" data-target="#LoginFormModal"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
            <li class ="dropdown" th:if="${usuarioLogado} != null">
            	 <a class="dropdown-toggle" data-toggle="dropdown" href="#" ><span class="glyphicon glyphicon-user "></span><span th:text=" ${usuarioLogado.nome}" ></span>
                 <span class="caret" ></span></a>
                 <ul class="dropdown-menu">
                     <li>
                         <a href="#" th:if="${usuarioLogado.getCategoria()} !=null">Editar Perfil de Empresa</a>
                    		<a href="#" th:if="${usuarioLogado.getCategoria()} ==null">Perfil</a> 
                         <a th:href="@{/logout}">Logout</a> 
                     </li>
         </ul>         
     </li>
       </ul>     
     </div>
 </nav>
 
 
     <!-- Mapa -->
     <header id="top" class="header">
         <div id="map" class="text-vertical-center">
     	<section id="contact" class="map">
         <script type="text/javascript">
 			var map;
 			var marker;                   
 			function initMap() {
 				var posicao = {lat: -29.8991610, lng: -51.1504780};
 		        map = new google.maps.Map(document.getElementById('map'), {
 		          zoom: 16,
 		          center: posicao,
 		          scrollwheel: false
 		        });
 		        marker = new google.maps.Marker({
 		          position: posicao,
 		          map: map
 		        });
 			}
 
 			function trocarPosicao(endereco) {
 				$.ajax({
 					method: 'GET', // Requisicao de dados pro google
 					url: 'https://maps.googleapis.com/maps/api/geocode/json?address=' + endereco
 				}).done(function (data) {
 					var lat = data.results[0].geometry.location.lat;
 					var lng = data.results[0].geometry.location.lng;
 					map.setCenter({lat: lat, lng: lng});
 					marker.setPosition({lat: lat, lng: lng});
 					map.setZoom(16);
 				});
 			}
 	  </script>
     <script async defer
       src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC2UcFQk_-Y9Jqysa_vLaAzW0zJk88xreo&callback=initMap">
     </script>
         </section>
         </div>
         </header>
  
      <!-- Footer -->
     <div class="container">
     <h1>Lista de Empresas</h1>
      <table id="example" class="table table-striped table-bordered table-hover">
           <thead>
              <tr>
                 <th>Nome</th>
                 <th>Email</th>
                 <th>Endereco</th>
                 <th>Telefone</th>
                 <th>Ações</th>
             </tr>
         </thead>
         <tbody>
                       
            </tbody>
     </table>
     </div>
 <!-- Datatable -->
     <script>
         $('#example').dataTable();
     </script>
 
 <!-- Modal de Pesquisa -->
     <div id="search">
      <button type="button" class="close">×</button>
      <form id="pesquisar">
         <input type="search" value="" placeholder="Digite o nome da Empresa ou Prestador" id="pesq" autocomplete="off"/>
          <button type="submit" class="btn btn-primary">Pesquisar</button>
      </form>
  </div>
 
     <!-- Bootstrap Core JavaScript -->
     <script src="js/bootstrap.min.js"></script>
     
 </body>
 </html>